<UserControl
    x:Class="PTZControl.Views.MainView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:PTZControl.ViewModels"
    d:DesignHeight="1000"
    d:DesignWidth="800"
    x:DataType="vm:MainViewModel"
    mc:Ignorable="d">

    <UserControl.Styles>
        <!--  Common TextBlock Style  -->
        <Style Selector="TextBlock.Label">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>

        <!--  Common TextBox Style  -->
        <Style Selector="TextBox">
            <Setter Property="Height" Value="38" />
            <Setter Property="Padding" Value="12,0" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Background" Value="#FAFAFA" />
            <Setter Property="BorderBrush" Value="#CCCCCC" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="FontSize" Value="14" />
        </Style>

        <!--  Common Button Style  -->
        <Style Selector="Button">
            <Setter Property="Height" Value="38" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
        </Style>

        <Style Selector="Button.Primary">
             <Setter Property="Background" Value="#0078D4" />
             <Setter Property="Foreground" Value="White" />
        </Style>
        <Style Selector="Button.Primary:pointerover">
            <Setter Property="Background" Value="#0062AD" />
             <Setter Property="Foreground" Value="White" />
        </Style>

        <!--  Card/Border Style  -->
        <Style Selector="Border.Card">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="BoxShadow" Value="0 2 10 0 #10000000" />
            <Setter Property="Margin" Value="0,0,0,15" />
            <Setter Property="Padding" Value="20" />
        </Style>
    </UserControl.Styles>

    <Grid Margin="20" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,*">

        <!--  Row 0: Connection Settings  -->
        <Border Grid.Row="0" Classes="Card">
            <StackPanel
                HorizontalAlignment="Center"
                Orientation="Horizontal"
                Spacing="20">
                <TextBlock Classes="Label" Text="IP Address:" />
                <TextBox
                    Width="170"
                    Text="{Binding IpAddress}"
                    Watermark="192.168.1.100" />

                <TextBlock Classes="Label" Text="Port:" />
                <TextBox
                    Width="100"
                    Text="{Binding TcpPort}"
                    Watermark="1470" />
            </StackPanel>
        </Border>

        <!--  Row 1: Hex Command  -->
        <Border Grid.Row="1" Classes="Card">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <TextBlock
                    Grid.Column="0"
                    Margin="0,0,15,0"
                    Classes="Label"
                    Text="HEX" />
                <TextBox
                    Grid.Column="1"
                    Margin="0,0,15,0"
                    Text="{Binding HexString}" />
                <Button
                    Grid.Column="2"
                    Width="100"
                    Classes="Primary"
                    Command="{Binding SendHexCommand}"
                    Content="Send" />
            </Grid>
        </Border>

        <!--  Row 2: PTZ Control & Filters  -->
        <Grid Grid.Row="2" ColumnDefinitions="Auto,*" Margin="0,0,0,15">
            <!--  Left: Joystick  -->
            <Border
                Grid.Column="0"
                Width="250"
                Height="200"
                Margin="0,0,20,0"
                Classes="Card">
                <Grid ColumnDefinitions="*,*,*" RowDefinitions="*,*,*" Margin="25,0,0,0">
                    <!--  Up  -->
                    <Button
                        Grid.Row="0"
                        Grid.Column="1"
                        Command="{Binding MoveUpCommand}"
                        Content="ðŸ¢" />
                    <!--  Left  -->
                    <Button
                        Grid.Row="1"
                        Grid.Column="0"
                        Command="{Binding MoveLeftCommand}"
                        Content="ðŸ¢€" />
                    <!--  Stop  -->
                    <Button
                        Grid.Row="1"
                        Grid.Column="1"
                        Width="35"
                        CornerRadius="50"
                        Background="#D32F2F"
                        Command="{Binding StopMotorCommand}"
                        Content=""
                        Margin="-1 0 0 0"
                        Foreground="White"
                        FontWeight="Bold">
                        <Button.Styles>
                             <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="#B71C1C" />
                                <Setter Property="Foreground" Value="White" />
                            </Style>
                        </Button.Styles>
                    </Button>
                    <!--  Right  -->
                    <Button
                        Grid.Row="1"
                        Grid.Column="2"
                        Command="{Binding MoveRightCommand}"
                        Content="ðŸ¢‚" />
                    <!--  Down  -->
                    <Button
                        Grid.Row="2"
                        Grid.Column="1"
                        Command="{Binding MoveDownCommand}"
                        Content="ðŸ¢ƒ" />
                </Grid>
            </Border>

            <!--  Right: Speed & Filters  -->
            <Border Grid.Column="1" Classes="Card">
                <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,Auto,*" VerticalAlignment="Center">
                    
                    <!-- Speed Controls -->
                    <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Spacing="10" Margin="0,0,0,20">
                        <TextBlock Classes="Label" Text="Tilt Speed" />
                        <TextBox Width="80" Text="{Binding TiltSpeed}" />
                    </StackPanel>

                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Spacing="10" Margin="20,0,0,20">
                        <TextBlock Classes="Label" Text="Pan Speed" />
                        <TextBox Width="80" Text="{Binding PanSpeed}" />
                    </StackPanel>

                    <!-- Filter Buttons -->
                    <StackPanel Grid.Row="1" Grid.ColumnSpan="3" Orientation="Horizontal" Spacing="20" HorizontalAlignment="Left" Margin="0 30 0 0">
                        <Button Command="{Binding EnableFilterCommand}" Content="Enable Filters" Width="120"/>
                        <Button Command="{Binding DisableFilterCommand}" Content="Disable Filters" Width="120"/>
                        <Button Command="{Binding DefaultFilterCommand}" Content="Set Default" Width="120"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!--  Row 3: DTV Controls  -->
        <Border Grid.Row="3" Classes="Card">
            <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,Auto,Auto,Auto,Auto,*">
                
                <!-- Header -->
                <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center" Margin="0,0,20,0">
                    <TextBlock Classes="Label" Text="DTV" FontSize="16"/>
                    <TextBlock Text="*zoom (28 ~ 980)" FontSize="10" Foreground="Red"/>
                </StackPanel>

                <!-- Current Value -->
                <TextBlock Grid.Row="0" Grid.Column="1" Classes="Label" Text="{Binding ZoomDefaultDTVValue}" Margin="0,0,20,0" Width="50"/>

                <!-- Zoom Step -->
                <TextBox Grid.Row="0" Grid.Column="2" Width="60" Text="{Binding ZoomDTVValue}" Margin="0,0,10,0"/>

                <!-- Zoom Buttons -->
                <Button Grid.Row="0" Grid.Column="3" Command="{Binding ZoomInDTVCommand}" Content="Zoom In" Margin="0,0,10,0"/>
                <Button Grid.Row="0" Grid.Column="4" Command="{Binding ZoomOutDTVCommand}" Content="Zoom Out" Margin="0,0,20,0"/>

                <!-- FOV Buttons -->
                <StackPanel Grid.Row="0" Grid.Column="5" Orientation="Horizontal" Spacing="10">
                    <Button Command="{Binding DTVNarrowFOVCommand}" Content="Narrow FOV"/>
                    <Button Command="{Binding DTVWideFOVCommand}" Content="Wide FOV" Width="97"/>
                </StackPanel>

                <!-- Row 2: Absolute Zoom & Focus -->
                 <TextBox Grid.Row="1" Grid.Column="2" Width="60" Text="{Binding DTVAbsoluteZoomValue}" Margin="0,15,10,0"/>
                 <Button Grid.Row="1" Grid.Column="3" Command="{Binding DTVAbsoluteZoomCommand}" Content="Zoom" Margin="0,15,10,0" Width="72"/>
                 
                 <TextBox Grid.Row="1" Grid.Column="4" Width="60" Text="{Binding FocusDTVValue}" Margin="0,15,0,0"/>
                 <StackPanel Grid.Row="1" Grid.Column="5" Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                     <Button Command="{Binding FocusDTVCommand}" Content="Focus" Width="100"/>
                     <Button Command="{Binding AutoFocusDTVCommand}" Content="Auto Focus" Width="100"/>
                 </StackPanel>

            </Grid>
        </Border>

        <!--  Row 4: IR Controls  -->
        <Border Grid.Row="4" Classes="Card">
             <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="Auto,Auto,Auto,Auto,Auto,*">
                
                <!-- Header -->
                <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center" Margin="0,0,20,0">
                    <TextBlock Classes="Label" Text="IR" FontSize="16"/>
                    <TextBlock Text="*zoom (24,194 ~ 37,801)" FontSize="10" Foreground="Red"/>
                </StackPanel>

                <!-- Current Value -->
                <TextBlock Grid.Row="0" Grid.Column="1" Classes="Label" Text="{Binding ZoomDefaultIRValue}" Margin="0,0,20,0" Width="50"/>

                <!-- Zoom Step -->
                <TextBox Grid.Row="0" Grid.Column="2" Width="60" Text="{Binding ZoomIRValue}" Margin="0,0,10,0"/>

                <!-- Zoom Buttons -->
                <Button Grid.Row="0" Grid.Column="3" Command="{Binding ZoomInIRCommand}" Content="Zoom In" Margin="0,0,10,0"/>
                <Button Grid.Row="0" Grid.Column="4" Command="{Binding ZoomOutIRCommand}" Content="Zoom Out" Margin="0,0,20,0"/>

                <!-- FOV Buttons -->
                <StackPanel Grid.Row="0" Grid.Column="5" Orientation="Horizontal" Spacing="10">
                    <Button Command="{Binding IRNarrowFOVCommand}" Content="Narrow FOV"/>
                    <Button Command="{Binding IRWideFOVCommand}" Content="Wide FOV" Width="97"/>
                </StackPanel>

                <!-- Row 2: Absolute Zoom & Focus -->
                 <TextBox Grid.Row="1" Grid.Column="2" Width="60" Text="{Binding IRAbsoluteZoomValue}" Margin="0,15,10,0"/>
                 <Button Grid.Row="1" Grid.Column="3" Command="{Binding IRAbsoluteZoomCommand}" Content="Zoom" Margin="0,15,10,0" Width="72"/>
                 
                 <TextBox Grid.Row="1" Grid.Column="4" Width="60" Text="{Binding FocusIRValue}" Margin="0,15,0,0"/>
                 <StackPanel Grid.Row="1" Grid.Column="5" Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                     <Button Command="{Binding FocusIRCommand}" Content="Focus" Width="100"/>
                     <Button Command="{Binding AutoFocusIRCommand}" Content="Auto Focus" Width="100"/>
                 </StackPanel>

                 <!-- Row 3: Digital Zoom -->
                 <TextBox Grid.Row="2" Grid.Column="2" Width="60" Text="{Binding IRDigitalZoomValue}" Margin="0,15,10,0"/>
                 <Button Grid.Row="2" Grid.Column="3" Command="{Binding IRDigitalZoomCommand}" Content="D-Zoom" Margin="0,15,10,0"/>

            </Grid>
        </Border>

        <!--  Row 5: Logs  -->
        <Grid Grid.Row="5" RowDefinitions="*,*" Margin="0,0,0,0">
            <TextBox
                Grid.Row="0"
                Height="40"
                Margin="0,0,0,10"
                FontFamily="Consolas"
                IsReadOnly="True"
                Text="{Binding TcpSent}" />

            <TextBox
                Grid.Row="1"
                Height="100"
                AcceptsReturn="True"
                FontFamily="Consolas"
                IsReadOnly="True"
                Text="{Binding TcpReply}"
                TextWrapping="Wrap" />
        </Grid>

    </Grid>
</UserControl>
